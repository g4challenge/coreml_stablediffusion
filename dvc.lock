schema: '2.0'
stages:
  convert_model:
    cmd: python -m python_coreml_stable_diffusion.torch2coreml --convert-unet --convert-text-encoder
      --convert-vae-decoder --convert-safety-checker -o models
    outs:
    - path: models
      md5: 93df63a4f0fba8efa93b51297af4cd9b.dir
      size: 2674410455
      nfiles: 12
  generate_images:
    cmd: python -m python_coreml_stable_diffusion.pipeline -i models -o data/processed
      --compute-unit ALL --seed 193 --prompt 'gandalf eating on a mountain top'
    deps:
    - path: models
      md5: 93df63a4f0fba8efa93b51297af4cd9b.dir
      size: 2674410455
      nfiles: 12
    params:
      params.yaml:
        prompt: gandalf eating on a mountain top
    outs:
    - path: data/processed
      md5: d013a3261f16fa1e676635e707f629e2.dir
      size: 478706
      nfiles: 1
